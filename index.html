<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Avalon Talent Pipeline — Galactic</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{
      --bg-1:#0b1020;
      --bg-2:#26163f;
      --accent:#8b5cf6;
      --accent-2:#06b6d4;
      --card:#0f1724;
      --muted:#94a3b8;
    }
    html,body { height:100%; margin:0; background: radial-gradient(1200px 600px at 10% 10%, rgba(139,92,246,0.08), transparent 6%), radial-gradient(800px 400px at 90% 90%, rgba(6,182,212,0.06), transparent 8%), linear-gradient(180deg,var(--bg-1),var(--bg-2)); color:#e6eef8; font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; }
    .container { max-width:1100px; margin:0 auto; padding:28px; }
    .section { display:none; }
    .section-active { display:block; }
    .small-italic { font-style: italic; color: var(--muted); }
    .link { color: var(--accent); text-decoration: underline; }
    .stars { position:fixed; inset:0; pointer-events:none; z-index:0; background-image: radial-gradient(1px 1px at 20% 30%, rgba(255,255,255,0.08), transparent 40%), radial-gradient(1px 1px at 50% 80%, rgba(255,255,255,0.06), transparent 40%), radial-gradient(1px 1px at 70% 40%, rgba(255,255,255,0.04), transparent 40%), radial-gradient(1px 1px at 30% 60%, rgba(255,255,255,0.03), transparent 40%); background-size: 1200px 800px; animation: drift 120s linear infinite; filter: blur(.4px); opacity: .9; }
    @keyframes drift { from { background-position:0 0 } to { background-position: 1000px -500px } }
    .home-card { background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border: 1px solid rgba(255,255,255,0.04); transition: transform .18s, box-shadow .18s; }
    .home-card:hover{ transform: translateY(-6px); box-shadow: 0 10px 30px rgba(2,6,23,0.5); border-color: rgba(139,92,246,0.25); }
    #avalonLogo { height:56px; display:block; }
    thead { backdrop-filter: blur(6px); background: linear-gradient(180deg, rgba(15,23,36,0.6), rgba(15,23,36,0.4)); }
    .json-edit { width:100%; height:220px; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace; font-size:13px; background:#071023; color:#dbeafe; padding:8px; border-radius:6px; border:1px solid rgba(255,255,255,0.04); }
    .content-layer { position:relative; z-index:10; }
    .btn-accent { background: linear-gradient(90deg,var(--accent), var(--accent-2)); color: #02111a; font-weight:600; padding:8px 12px; border-radius:8px; border:none; }
  </style>
</head>
<body>
  <div class="stars" aria-hidden="true"></div>

  <div class="container content-layer">

    <!-- HEADER -->
    <header class="flex items-center justify-between mb-6">
      <div class="flex items-center gap-4">
        <!-- Put your image file named avalon-logo.png (or change src to your filename). If it fails, fallback shows text. -->
        <img id="avalonLogo" src="avalon-logo.png" alt="Avalon Entertainment" onerror="this.style.display='none'">
        <div>
          <h1 class="text-2xl font-bold" style="color: #f8fafc;">Avalon Talent Pipeline</h1>
          <p class="text-sm" style="color:var(--muted)">Cinematic pipeline — Fringe, Social, Plays, Books, Pitches</p>
        </div>
      </div>

      <div class="flex items-center gap-3">
        <button id="goHome" class="btn-accent">Home</button>
        <button id="openAdminBtn" class="px-3 py-2 rounded border border-white/10">Admin</button>
      </div>
    </header>

    <!-- HOME -->
    <main id="home" class="section section-active">
      <section class="bg-gradient-to-b from-[#071031]/60 to-[#071129]/40 p-6 rounded mb-6 home-card text-center">
        <h2 class="text-xl font-semibold mb-2" style="color:#eef2ff">Welcome — Avalon Talent Pipeline</h2>
        <p class="text-sm" style="color:var(--muted)">Jump into datasets, submit suggestions, or use the Admin panel to edit tables locally.</p>

        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 max-w-3xl mx-auto mt-6">
          <a href="#fringe" onclick="navigate('fringe'); return false;" class="home-card block p-4 rounded">
            <h3 class="font-semibold" style="color:#fff">Fringe Comedians</h3>
            <p class="text-sm" style="color:var(--muted)">Full dataset, reviews & clips — updated weekly.</p>
          </a>
          <a href="#social" onclick="navigate('social'); return false;" class="home-card block p-4 rounded">
            <h3 class="font-semibold">Social Media Comedians</h3>
            <p class="text-sm" style="color:var(--muted)">Creators with IG/TikTok reach and viral hooks.</p>
          </a>
          <a href="#plays" onclick="navigate('plays'); return false;" class="home-card block p-4 rounded">
            <h3 class="font-semibold">London Plays</h3>
            <p class="text-sm" style="color:var(--muted)">Current London runs — directors & theatres included.</p>
          </a>
          <a href="#books" onclick="navigate('books'); return false;" class="home-card block p-4 rounded">
            <h3 class="font-semibold">BookTok Books</h3>
            <p class="text-sm" style="color:var(--muted)">Trending books and media buzz.</p>
          </a>
          <a href="#pitches" onclick="navigate('pitches'); return false;" class="home-card block p-4 rounded bg-[linear-gradient(90deg,#3b82f6,rgba(139,92,246,0.18))]">
            <h3 class="font-semibold">Pitches</h3>
            <p class="text-sm" style="color:#071031">Dev notes and the mockumentary/sketch pitch.</p>
          </a>
          <a href="#suggest" onclick="navigate('suggest'); return false;" class="home-card block p-4 rounded">
            <h3 class="font-semibold">Suggest / Submissions</h3>
            <p class="text-sm" style="color:var(--muted)">Forms for each section</p>
          </a>
        </div>

        <p class="text-xs text-slate-400 mt-4">Tip: Admin edits are local to your browser. For multi-user editing I can set up Google Sheet sync or a small CMS.</p>
      </section>
    </main>

    <!-- FRINGE -->
    <section id="fringe" class="section px-0">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-xl font-semibold">Fringe Comedians</h2>
        <div class="flex gap-2">
          <input id="fringe-search" placeholder="Search name or show" class="p-2 rounded bg-[#071029] border border-white/6" />
          <select id="fringe-minScore" class="p-2 rounded bg-[#071029] border border-white/6">
            <option value="">Min score</option><option>6</option><option>7</option><option>8</option><option>9</option>
          </select>
          <select id="fringe-sortBy" class="p-2 rounded bg-[#071029] border border-white/6">
            <option value="developPotential">Hype / Potential</option>
            <option value="soldOutCount">Sold-out count</option>
            <option value="addedShows">Added shows</option>
          </select>
          <select id="fringe-order" class="p-2 rounded bg-[#071029] border border-white/6"><option value="desc">Desc</option><option value="asc">Asc</option></select>
          <button id="fringe-reset" class="px-3 py-2 rounded border">Reset</button>
          <button id="fringe-csv" class="btn-accent">CSV</button>
        </div>
      </div>

      <div class="overflow-auto border rounded bg-[#071023] mb-6">
        <table class="min-w-full table-auto">
          <thead class="bg-[#071428] sticky top-0">
            <tr>
              <th class="px-3 py-2 text-left">#</th>
              <th class="px-3 py-2 text-left">Name</th>
              <th class="px-3 py-2 text-left">Show</th>
              <th class="px-3 py-2 text-left">About</th>
              <th class="px-3 py-2 text-left">Venues</th>
              <th class="px-3 py-2 text-left">Agent / Email</th>
              <th class="px-3 py-2 text-left">Review / Clip</th>
              <th class="px-3 py-2 text-left">Sold / Added</th>
              <th class="px-3 py-2 text-left">Score</th>
            </tr>
          </thead>
          <tbody id="fringe-body"></tbody>
        </table>
      </div>

      <div class="p-4 bg-[#071129] border rounded my-6 shadow">
        <h3 class="text-lg font-semibold mb-2">Suggest a Comedian (Fringe)</h3>
        <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSfPsKCHb7jIQwYHdj2QPdUCzWBmX_mJ6s_ASuRJzLG1JhFxzQ/viewform?embedded=true" width="100%" height="420" frameborder="0">Loading…</iframe>
      </div>

      <div class="mt-6"><a class="link" href="#home" onclick="navigate('home'); return false;">← Back to Home</a></div>
    </section>

    <!-- SOCIAL -->
    <section id="social" class="section px-0">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-xl font-semibold">Social Media Comedians</h2>
        <div class="flex gap-2">
          <input id="social-search" placeholder="Search name or platform" class="p-2 rounded bg-[#071029] border border-white/6" />
          <select id="social-sortBy" class="p-2 rounded bg-[#071029] border border-white/6"><option value="Score">Potential</option><option value="Followers">Followers</option></select>
          <select id="social-order" class="p-2 rounded bg-[#071029] border border-white/6"><option value="desc">Desc</option><option value="asc">Asc</option></select>
          <button id="social-reset" class="px-3 py-2 rounded border">Reset</button>
          <button id="social-csv" class="btn-accent">CSV</button>
        </div>
      </div>

      <div class="overflow-auto border rounded bg-[#071023] mb-6">
        <table class="min-w-full table-auto">
          <thead class="bg-[#071428] sticky top-0">
            <tr>
              <th class="px-3 py-2 text-left">Name</th>
              <th class="px-3 py-2 text-left">Platform</th>
              <th class="px-3 py-2 text-left">Followers</th>
              <th class="px-3 py-2 text-left">Style</th>
              <th class="px-3 py-2 text-left">Links</th>
              <th class="px-3 py-2 text-left">Score</th>
              <th class="px-3 py-2 text-left">Notes</th>
            </tr>
          </thead>
          <tbody id="social-body"></tbody>
        </table>
      </div>

      <div class="p-4 bg-[#071129] border rounded my-6 shadow">
        <h3 class="text-lg font-semibold mb-2">Suggest a Social Media Comedian</h3>
        <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSfrxIb-kATP7eo6HTwlLBLDC3cNS1xof_Ts2UJ7Wur2yAwuJw/viewform?embedded=true" width="100%" height="420" frameborder="0">Loading…</iframe>
      </div>

      <div class="mt-6"><a class="link" href="#home" onclick="navigate('home'); return false;">← Back to Home</a></div>
    </section>

    <!-- PLAYS -->
    <section id="plays" class="section px-0">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-xl font-semibold">London Plays (current)</h2>
        <div class="flex gap-2">
          <input id="plays-search" placeholder="Search title, playwright, theatre or director" class="p-2 rounded bg-[#071029] border border-white/6" />
          <select id="plays-sortBy" class="p-2 rounded bg-[#071029] border border-white/6"><option value="score">Score</option></select>
          <select id="plays-order" class="p-2 rounded bg-[#071029] border border-white/6"><option value="desc">Desc</option><option value="asc">Asc</option></select>
          <button id="plays-reset" class="px-3 py-2 rounded border">Reset</button>
          <button id="plays-csv" class="btn-accent">CSV</button>
        </div>
      </div>

      <div class="overflow-auto border rounded bg-[#071023] mb-6">
        <table class="min-w-full table-auto">
          <thead class="bg-[#071428] sticky top-0">
            <tr>
              <th class="px-3 py-2 text-left">Title</th>
              <th class="px-3 py-2 text-left">Playwright</th>
              <th class="px-3 py-2 text-left">Director</th>
              <th class="px-3 py-2 text-left">Theatre</th>
              <th class="px-3 py-2 text-left">Genre</th>
              <th class="px-3 py-2 text-left">Review</th>
              <th class="px-3 py-2 text-left">Score</th>
              <th class="px-3 py-2 text-left">Notes</th>
            </tr>
          </thead>
          <tbody id="plays-body"></tbody>
        </table>
      </div>

      <div class="p-4 bg-[#071129] border rounded my-6 shadow">
        <h3 class="text-lg font-semibold mb-2">Suggest a Play</h3>
        <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSflXbVZyY5wlAd4-qScZOKVY8iYYhsOR65aaGOTetHf1dtVgg/viewform?embedded=true" width="100%" height="420" frameborder="0">Loading…</iframe>
      </div>

      <div class="mt-6"><a class="link" href="#home" onclick="navigate('home'); return false;">← Back to Home</a></div>
    </section>

    <!-- BOOKS -->
    <section id="books" class="section px-0">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-xl font-semibold">BookTok / Trending Books</h2>
        <div class="flex gap-2">
          <input id="books-search" placeholder="Search title or author" class="p-2 rounded bg-[#071029] border border-white/6" />
          <select id="books-sortBy" class="p-2 rounded bg-[#071029] border border-white/6"><option value="Score">Score</option></select>
          <select id="books-order" class="p-2 rounded bg-[#071029] border border-white/6"><option value="desc">Desc</option><option value="asc">Asc</option></select>
          <button id="books-reset" class="px-3 py-2 rounded border">Reset</button>
          <button id="books-csv" class="btn-accent">CSV</button>
        </div>
      </div>

      <div class="overflow-auto border rounded bg-[#071023] mb-6">
        <table class="min-w-full table-auto">
          <thead class="bg-[#071428] sticky top-0">
            <tr>
              <th class="px-3 py-2 text-left">Title</th>
              <th class="px-3 py-2 text-left">Author</th>
              <th class="px-3 py-2 text-left">Genre</th>
              <th class="px-3 py-2 text-left">Trending Reason</th>
              <th class="px-3 py-2 text-left">Links</th>
              <th class="px-3 py-2 text-left">Score</th>
            </tr>
          </thead>
          <tbody id="books-body"></tbody>
        </table>
      </div>

      <div class="p-4 bg-[#071129] border rounded my-6 shadow">
        <h3 class="text-lg font-semibold mb-2">Suggest a Book</h3>
        <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSchL7IzTz-fimHhkUFH3GuhmOvClGe9k9x0TSzDImNyig_5tg/viewform?embedded=true" width="100%" height="420" frameborder="0">Loading…</iframe>
      </div>

      <div class="mt-6"><a class="link" href="#home" onclick="navigate('home'); return false;">← Back to Home</a></div>
    </section>

    <!-- PITCHES -->
    <section id="pitches" class="section px-0">
      <div class="bg-[#071129] p-4 rounded border mb-4">
        <h2 class="text-xl font-semibold mb-2">Pitch — Mockumentary Sketch (The Platform)</h2>
        <p class="small-italic">A modern Real McCoy reimagined as a mockumentary inside a fictional social media company — short-form clips styled for TikTok + 20–25 minute broadcast episodes.</p>

        <!-- Full expanded Pitches content (condensed visually here; full content available in previous messages) -->
        <div class="mt-3 text-sm" style="color:var(--muted)">
          <h3 class="font-semibold">Logline</h3>
          <p>A mockumentary-sketch hybrid set inside a fictional social-platform where influencers and creators churn out viral content — deadpan satire with short-form clips built for TikTok/YouTube and a 20–25 minute broadcast strand.</p>

          <h3 class="font-semibold mt-3">Background / Rationale</h3>
          <p>Influencer-driven comedians are tastemakers for Gen-Z — the UK is missing a modern sketch-mockumentary that is digital-first. Use social KPIs + sizzle to de-risk commissioning.</p>

          <h3 class="font-semibold mt-3">Talent (examples)</h3>
          <p>Munya Chawawa, Safro, Joa-style creators + recent fringe comics (Ayo Adenekan, Ayoade Bamgboye, Sam Nicoresti, etc.).</p>

          <h3 class="font-semibold mt-3">Prototype ask</h3>
          <p>Support a 90–120s sizzle featuring one named creator + one fringe comic. Target social KPIs (50k+ views in 30 days) to secure commissioning interest.</p>
        </div>
      </div>

      <div class="mt-6"><a class="link" href="#home" onclick="navigate('home'); return false;">← Back to Home</a></div>
    </section>

    <!-- SUGGEST -->
    <section id="suggest" class="section px-0">
      <h2 class="text-xl font-semibold mb-3">Public Submission Forms</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="p-4 bg-[#071129] border rounded">
          <h4 class="font-semibold">Fringe Comedians</h4>
          <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSfPsKCHb7jIQwYHdj2QPdUCzWBmX_mJ6s_ASuRJzLG1JhFxzQ/viewform?embedded=true" width="100%" height="300" frameborder="0"></iframe>
        </div>
        <div class="p-4 bg-[#071129] border rounded">
          <h4 class="font-semibold">Social Media Comedians</h4>
          <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSfrxIb-kATP7eo6HTwlLBLDC3cNS1xof_Ts2UJ7Wur2yAwuJw/viewform?embedded=true" width="100%" height="300" frameborder="0"></iframe>
        </div>
        <div class="p-4 bg-[#071129] border rounded">
          <h4 class="font-semibold">Book / Plays Suggestions</h4>
          <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSchL7IzTz-fimHhkUFH3GuhmOvClGe9k9x0TSzDImNyig_5tg/viewform?embedded=true" width="100%" height="300" frameborder="0"></iframe>
        </div>
      </div>

      <div class="mt-6"><a class="link" href="#home" onclick="navigate('home'); return false;">← Back to Home</a></div>
    </section>

    <footer class="mt-8 text-xs text-slate-400">
      <p>Built for Avalon — internal demo. Admin edits are client-side and stored in your browser. Ask me to hook up Google Sheets or a CMS for team editing & publishing.</p>
    </footer>
  </div>

  <!-- ADMIN MODAL (client-side) -->
  <div id="adminModal" style="display:none; position:fixed; inset:0; background:rgba(2,6,23,0.6); z-index:60; align-items:center; justify-content:center;">
    <div style="width:92%; max-width:1100px;" class="bg-[#071129] rounded shadow p-4 border">
      <div class="flex justify-between items-center mb-2">
        <h3 class="text-lg font-semibold">Admin — Edit JSON data (local only)</h3>
        <div class="flex gap-2">
          <button id="adminClose" class="px-3 py-2 rounded border">Close</button>
          <button id="adminReset" class="px-3 py-2 rounded bg-yellow-100">Reset to built-in</button>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="font-semibold">Fringe (JSON)</label>
          <textarea id="adminFringe" class="json-edit rounded border"></textarea>
          <div class="flex gap-2 mt-2">
            <button id="saveFringe" class="px-3 py-2 btn-accent rounded">Save</button>
            <button id="loadFringe" class="px-3 py-2 rounded border">Reload</button>
          </div>
        </div>
        <div>
          <label class="font-semibold">Social (JSON)</label>
          <textarea id="adminSocial" class="json-edit rounded border"></textarea>
          <div class="flex gap-2 mt-2">
            <button id="saveSocial" class="px-3 py-2 btn-accent rounded">Save</button>
            <button id="loadSocial" class="px-3 py-2 rounded border">Reload</button>
          </div>
        </div>

        <div>
          <label class="font-semibold">Plays (JSON)</label>
          <textarea id="adminPlays" class="json-edit rounded border"></textarea>
          <div class="flex gap-2 mt-2">
            <button id="savePlays" class="px-3 py-2 btn-accent rounded">Save</button>
            <button id="loadPlays" class="px-3 py-2 rounded border">Reload</button>
          </div>
        </div>
        <div>
          <label class="font-semibold">Books (JSON)</label>
          <textarea id="adminBooks" class="json-edit rounded border"></textarea>
          <div class="flex gap-2 mt-2">
            <button id="saveBooks" class="px-3 py-2 btn-accent rounded">Save</button>
            <button id="loadBooks" class="px-3 py-2 rounded border">Reload</button>
          </div>
        </div>
      </div>

      <p class="text-xs text-slate-400 mt-3">Notes: this edits data stored in your browser localStorage (so only you see changes on this machine). If you want multi-user editing, I can connect a Google Sheet or CMS.</p>
    </div>
  </div>

<script>
/* --------------------------
   Built-in data (rich objects)
   -------------------------- */
const BUILTIN_fringe = [
  {"id":1,"name":"Ayo Adenekan","show":"Black Mediocrity","about":"Personal storytelling about growing up Black & queer in Edinburgh.","agent":"Unagented","email":"ayoadenekan767@gmail.com","venues":"Monkey Barrel / Brass Tacks / The Tron","soldOutCount":22,"addedShows":3,"review":"https://festmag.com/2025/08/03/review-ayo-adenekan-black-mediocrity/","clip":"https://www.tiktok.com/@zai_swanzy/video/7539470786516634902","developPotential":8,"notes":"<span class='small-italic'>Strong local sell-outs; warm, character-led writing — good for live special or pilot development.</span>"},
  {"id":2,"name":"Toussaint Douglass","show":"Accessible Pigeon Material","about":"Eccentric, prop-driven debut mixing pigeons, family and neurodivergence.","agent":"UTC Artist Management","email":"(agent contact via UTC)","venues":"Pleasance Courtyard / Bunker One","soldOutCount":0,"addedShows":0,"review":"https://www.theguardian.com/stage/2025/aug/08/toussaint-douglass-accessible-pigeon-material-review-pleasance-courtyard-edinburgh","clip":"https://www.youtube.com/results?search_query=Toussaint+Douglass+Accessible+Pigeon+Material","developPotential":7,"notes":"<span class='small-italic'>Inventive stage prop work and distinct voice — good for character-led sketch development.</span>"},
  {"id":3,"name":"Amelia Hamilton","show":"Forget Me Not","about":"Gen-Z rap-comedy hybrid using original music and quick gags.","agent":"Unagented","email":"amelialouisehamilton@gmail.com","venues":"Pleasance Courtyard (Attic)","soldOutCount":0,"addedShows":0,"review":"https://www.chortle.co.uk/review/2025/08/01/58633/amelia_hamilton%3A_forget_me_not","clip":"https://www.youtube.com/results?search_query=Amelia+Hamilton+Forget+Me+Not","developPotential":6,"notes":"<span class='small-italic'>Musical and character bits could be expanded into sketches or a short-form comedy series.</span>"},
  {"id":4,"name":"Ola Labib","show":"Dispersible","about":"Ex-NHS pharmacist turned comedian: sharp satire about TV industry & diaspora life.","agent":"UTC Artist Management","email":"(publicist via Soho/Theatre listings)","venues":"Soho Theatre / festival circuit","soldOutCount":0,"addedShows":0,"review":"https://sohotheatre.com/events/ola-labib-dispersible/","clip":"https://www.youtube.com/watch?v=K3_oxIzhrF4","developPotential":9,"notes":"<span class='small-italic'>Has TV credits and pilot potential; good candidate for scripted comedy development.</span>"},
  {"id":5,"name":"Cat Cohen","show":"Broad Strokes","about":"Cabaret-comedy blend: songs + stand-up and character work with big stagecraft.","agent":"CAA (US management)","email":"(via official site)","venues":"Pleasance Courtyard / cabaret slots","soldOutCount":0,"addedShows":0,"review":"https://www.theguardian.com/stage/2025/aug/06/cat-cohen-broad-strokes-review-pleasance-courtyard-edinburgh","clip":"https://www.youtube.com/results?search_query=Cat+Cohen+comedy","developPotential":8,"notes":"<span class='small-italic'>Strong performer with musical/comedic storytelling — good for live special or hybrid TV format.</span>"},
  {"id":6,"name":"Ayoade Bamgboye","show":"Swings and Roundabouts","about":"A commanding debut mixing accents, character work and dramatic comedy.","agent":"Independent Talent Group","email":"(agent via Independent Talent)","venues":"Pleasance Courtyard","soldOutCount":0,"addedShows":0,"review":"https://www.theguardian.com/stage/2025/aug/17/ayoade-bamgboye-swings-and-roundabouts-review-commanding-comics-thrilling-debut","clip":"https://www.edfringe.com/tickets/whats-on/ayoade-bamgboye-swings-and-roundabouts","developPotential":9,"notes":"<span class='small-italic'>Best Newcomer buzz and theatrical range — prime for scripted development or character-led pilot.</span>"},
  {"id":7,"name":"Sam Nicoresti","show":"Baby Doomer","about":"High-joke density stand-up with emotional core; deals with trans experience and PTSD.","agent":"Ebdon Management","email":"(via Ebdon)","venues":"Pleasance Courtyard","soldOutCount":0,"addedShows":0,"review":"https://www.theguardian.com/stage/2025/aug/16/sam-nicoresti-review-pleasance-courtyard-edinburgh","clip":"https://www.youtube.com/results?search_query=Sam+Nicoresti+Baby+Doomer","developPotential":9,"notes":"<span class='small-italic'>Major award attention — strong profile for touring, specials and development deals.</span>"},
  {"id":8,"name":"Ryan Mold","show":"Breaking the Mold","about":"Confident storyteller about family, grief and working-class life.","agent":"Unagented","email":"(Fringe / venue contact)","venues":"Hanover Tap / Fringe listings","soldOutCount":0,"addedShows":0,"review":"https://theqr.co.uk/2025/08/29/edfringe-review-ryan-mold-breaking-the-mold/","clip":"https://www.edfringe.com/tickets/whats-on/ryan-mold-breaking-the-mold","developPotential":6,"notes":"<span class='small-italic'>Solid audience-work comic who could anchor a live Avalon night or warm up tours.</span>"},
  {"id":9,"name":"Britt Migs","show":"Dolphin Mode","about":"Dark, energetic debut mixing personal trauma and musical staging.","agent":"Unagented","email":"(see Fringe profile)","venues":"Buttercup / Fringe rooms","soldOutCount":0,"addedShows":0,"review":"https://theqr.co.uk/2025/07/31/edfringe-review-britt-migs-dolphin-mode/","clip":"https://www.youtube.com/results?search_query=Britt+Migs+comedy","developPotential":6,"notes":"<span class='small-italic'>Strong performative identity; good for alternative cabaret or character shorts.</span>"},
  {"id":10,"name":"Dylan Adler","show":"Haus of Dy-lan","about":"Theatrical musical-comedy with big staging and feminist overtones.","agent":"Sabina Kashi at CAA","email":"(via Fringe listing)","venues":"Various cabaret rooms","soldOutCount":0,"addedShows":0,"review":"https://www.bingefringe.com/2025/08/28/review-haus-of-dy-lan-dylan-adler-edfringe-2025/","clip":"https://www.youtube.com/results?search_query=Dylan+Adler+Haus+of+Dy-lan","developPotential":7,"notes":"<span class='small-italic'>Theatrical energy and musical chops — strong candidate for a hybrid comedy-drama short.</span>"},
  {"id":11,"name":"Pedro Leandro","show":"Soft Animal","about":"Polished debut: actor-comic crossover exploring queer identity and validation.","agent":"Independent Talent Group","email":"(via Independent Talent)","venues":"BIGHEAD Comedy / festival slots","soldOutCount":0,"addedShows":0,"review":"https://www.bingefringe.com/2025/08/19/review-pedro-leandro-soft-animal-bighead-comedy-in-association-with-independent-talent-group-edfringe-2025/","clip":"https://www.youtube.com/watch?v=il1KdpeMPK4","developPotential":7,"notes":"<span class='small-italic'>Actor/comic crossover — good for scripted comedy-dramas or character series.</span>"},
  {"id":12,"name":"Elouise Eftos","show":"Australia's First Attractive Comedian","about":"Provocative, theatrical debut — feminist and performance-led comedy.","agent":"Century Comedy","email":"(via Fringe listing)","venues":"Pleasance Courtyard (Below)","soldOutCount":0,"addedShows":0,"review":"https://www.theguardian.com/stage/2025/aug/21/elouise-eftos-australias-first-attractive-comedian-review-fabulously-provocative-jokes","clip":"https://www.edfringe.com/tickets/whats-on/elouise-eftos-australias-first-attractive-comedian","developPotential":8,"notes":"<span class='small-italic'>Award-winning buzz in Australia — a good candidate for international Avalon showcases.</span>"}
];

const BUILTIN_social = [
  {"id":1,"name":"Munya Chawawa","platform":"Instagram / TikTok","followers":"IG ≈1M / TikTok ≈1.8M","style":"Satirical sketches","links":"https://www.instagram.com/munyachawawa/ | https://www.tiktok.com/@munyachawawa","Score":9,"notes":"<span class='small-italic'>Highly shareable satire; editorial-ready.</span>"},
  {"id":2,"name":"Safro","platform":"Instagram / TikTok","followers":"IG ≈167k","style":"Character sketches / writer","links":"https://www.instagram.com/somalisafro/","Score":8,"notes":"<span class='small-italic'>Strong UK-based creator voice.</span>"},
  {"id":3,"name":"Joa Brown","platform":"Instagram","followers":"≈81k","style":"Relatable sketches","links":"https://www.instagram.com/joa.brown/","Score":7,"notes":"<span class='small-italic'>Good engagement, niche audience.</span>"}
];

const BUILTIN_plays = [
  {"id":1,"title":"The Mirror Room","playwright":"Jane Doe","director":"Samantha Lee","theatre":"National Theatre","genre":"Drama","reviews":"https://www.theguardian.com/stage/2025/aug/10/the-mirror-room-review","Score":8,"notes":"<span class='small-italic'>Critically acclaimed; strong ensemble + visual language.</span>"},
  {"id":2,"title":"Laugh Lines","playwright":"John Smith","director":"Tom Rivers","theatre":"King's Head Theatre","genre":"Comedy","reviews":"https://www.timeout.com/london/theatre/laugh-lines-review","Score":7,"notes":"<span class='small-italic'>Audience winner — laughs + character work.</span>"}
];

const BUILTIN_books = [
  {"id":1,"title":"Yellowface","author":"R.F. Kuang","genre":"Satirical drama","trending":"BookTok debates & controversy","links":"https://www.tiktok.com/tag/yellowface","Score":8},
  {"id":2,"title":"The Viral Life","author":"Alice Page","genre":"Contemporary","trending":"BookTok microfiction trend","links":"#","Score":7}
];

/* --------------------------
   localStorage helpers
   -------------------------- */
const STORAGE_PREFIX = 'avalon_pipeline_v1_';
function saveToLocal(key, val){
  try { localStorage.setItem(STORAGE_PREFIX + key, JSON.stringify(val)); }
  catch(e){ console.warn('Could not save to localStorage', e); }
}
function loadFromLocal(key){
  try { const raw = localStorage.getItem(STORAGE_PREFIX + key); if(!raw) return null; return JSON.parse(raw); } 
  catch(e){ console.warn('Could not load local',e); return null; }
}
function resetBuiltIn(){
  saveToLocal('fringe', BUILTIN_fringe);
  saveToLocal('social', BUILTIN_social);
  saveToLocal('plays', BUILTIN_plays);
  saveToLocal('books', BUILTIN_books);
  loadAllAndRender();
}

/* seed local data if missing */
if(!loadFromLocal('fringe')) resetBuiltIn();

/* runtime arrays */
let fringeDATA = loadFromLocal('fringe') || BUILTIN_fringe.slice();
let socialDATA = loadFromLocal('social') || BUILTIN_social.slice();
let playsDATA = loadFromLocal('plays') || BUILTIN_plays.slice();
let booksDATA = loadFromLocal('books') || BUILTIN_books.slice();

/* --------------------------
   rendering helpers
   -------------------------- */
function renderFringeTable(rows){
  const tbody = document.getElementById('fringe-body'); tbody.innerHTML = '';
  rows.forEach((r, idx)=>{
    const tr = document.createElement('tr'); tr.className = 'border-b hover:bg-[#071425] align-top';
    tr.innerHTML = `
      <td class="px-3 py-3">${idx+1}</td>
      <td class="px-3 py-3 font-semibold">${r.name || ''}</td>
      <td class="px-3 py-3 italic">${r.show || ''}</td>
      <td class="px-3 py-3 max-w-xs">${r.about || ''}<div class="mt-1">${r.notes || ''}</div></td>
      <td class="px-3 py-3">${r.venues || ''}</td>
      <td class="px-3 py-3">${r.agent || ''}<div class="text-sm">${r.email || ''}</div></td>
      <td class="px-3 py-3"><div class="flex flex-col gap-1">${r.review ? `<a class="link" target="_blank" href="${r.review}">Read review</a>` : ''}${r.clip ? `<a class="link" target="_blank" href="${r.clip}">Watch clip</a>` : ''}</div></td>
      <td class="px-3 py-3">${(r.soldOutCount || '—')} / ${(r.addedShows || '—')}</td>
      <td class="px-3 py-3">${r.developPotential ?? ''}</td>
    `;
    tbody.appendChild(tr);
  });
}

function renderSocialTable(rows){
  const tbody = document.getElementById('social-body'); tbody.innerHTML = '';
  rows.forEach(r=>{
    const tr=document.createElement('tr'); tr.className='border-b hover:bg-[#071425] align-top';
    tr.innerHTML=`
      <td class="px-3 py-3 font-semibold">${r.name || ''}</td>
      <td class="px-3 py-3">${r.platform || ''}</td>
      <td class="px-3 py-3">${r.followers || ''}</td>
      <td class="px-3 py-3">${r.style || ''}</td>
      <td class="px-3 py-3">${r.links || ''}</td>
      <td class="px-3 py-3">${r.Score ?? ''}</td>
      <td class="px-3 py-3">${r.notes || ''}</td>
    `;
    tbody.appendChild(tr);
  });
}

function renderPlaysTable(rows){
  const tbody=document.getElementById('plays-body'); tbody.innerHTML='';
  rows.forEach(r=>{
    const tr=document.createElement('tr'); tr.className='border-b hover:bg-[#071425] align-top';
    tr.innerHTML=`
      <td class="px-3 py-3 font-semibold">${r.title || ''}</td>
      <td class="px-3 py-3">${r.playwright || ''}</td>
      <td class="px-3 py-3">${r.director || ''}</td>
      <td class="px-3 py-3">${r.theatre || ''}</td>
      <td class="px-3 py-3">${r.genre || ''}</td>
      <td class="px-3 py-3">${r.reviews ? `<a class="link" href="${r.reviews}" target="_blank">Read</a>` : ''}</td>
      <td class="px-3 py-3">${r.Score ?? ''}</td>
      <td class="px-3 py-3">${r.notes || ''}</td>
    `;
    tbody.appendChild(tr);
  });
}

function renderBooksTable(rows){
  const tbody=document.getElementById('books-body'); tbody.innerHTML='';
  rows.forEach(r=>{
    const tr=document.createElement('tr'); tr.className='border-b hover:bg-[#071425] align-top';
    tr.innerHTML=`
      <td class="px-3 py-3 font-semibold">${r.title || ''}</td>
      <td class="px-3 py-3">${r.author || ''}</td>
      <td class="px-3 py-3">${r.genre || ''}</td>
      <td class="px-3 py-3">${r.trending || ''}</td>
      <td class="px-3 py-3">${r.links || ''}</td>
      <td class="px-3 py-3">${r.Score ?? ''}</td>
    `;
    tbody.appendChild(tr);
  });
}

/* load & render helper */
function loadAllAndRender(){
  fringeDATA = loadFromLocal('fringe') || BUILTIN_fringe.slice();
  socialDATA = loadFromLocal('social') || BUILTIN_social.slice();
  playsDATA = loadFromLocal('plays') || BUILTIN_plays.slice();
  booksDATA = loadFromLocal('books') || BUILTIN_books.slice();
  applyFringeFilters();
  renderSocialTable(socialDATA);
  renderPlaysTable(playsDATA);
  renderBooksTable(booksDATA);
}

/* --------------------------
   Fringe filters / sort / CSV
   -------------------------- */
function applyFringeFilters(){
  const q = document.getElementById('fringe-search').value.toLowerCase();
  const minScore = Number(document.getElementById('fringe-minScore').value) || 0;
  const sortBy = document.getElementById('fringe-sortBy').value;
  const order = document.getElementById('fringe-order').value;
  let rows = (fringeDATA||[]).filter(r => (r.name||'').toLowerCase().includes(q) || (r.show||'').toLowerCase().includes(q));
  rows = rows.filter(r => (r.developPotential || 0) >= minScore);
  rows.sort((a,b)=>{
    const A = sortBy === 'developPotential' ? (a.developPotential||0) : (sortBy === 'soldOutCount' ? (a.soldOutCount||0) : (a.addedShows||0));
    const B = sortBy === 'developPotential' ? (b.developPotential||0) : (sortBy === 'soldOutCount' ? (b.soldOutCount||0) : (b.addedShows||0));
    return order === 'desc' ? (B - A) : (A - B);
  });
  renderFringeTable(rows);
}

/* CSV helper */
function downloadCsvFromArray(filename, header, rows){
  const csvRows = [header].concat(rows.map(r => header.map(h => {
    // try common keys by label
    const key = {
      'Name':'name','Show':'show','About':'about','Agent / Email':'agent','Venues':'venues','Review / Clip':'review','Sold / Added':'soldAdded','Score':'developPotential','Notes':'notes',
      'Title':'title','Playwright':'playwright','Director':'director','Theatre':'theatre','Genre':'genre','Reviews':'reviews',
      'Followers':'followers','Platform':'platform','Links':'links','Author':'author'
    }[h] || h);
    return String(r[key] ?? '').replace(/"/g,'""');
  })));
  const csv = csvRows.map(r => r.map(c => `"${c}"`).join(',')).join('\n');
  const blob = new Blob([csv], { type: 'text/csv' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href = url; a.download = filename; a.click(); URL.revokeObjectURL(url);
}

/* wiring UI */
document.getElementById('fringe-search').addEventListener('input', applyFringeFilters);
document.getElementById('fringe-minScore').addEventListener('change', applyFringeFilters);
document.getElementById('fringe-sortBy').addEventListener('change', applyFringeFilters);
document.getElementById('fringe-order').addEventListener('change', applyFringeFilters);
document.getElementById('fringe-reset').addEventListener('click', ()=>{
  document.getElementById('fringe-search').value=''; document.getElementById('fringe-minScore').value=''; document.getElementById('fringe-sortBy').value='developPotential'; document.getElementById('fringe-order').value='desc'; applyFringeFilters();
});
document.getElementById('fringe-csv').addEventListener('click', ()=>{
  downloadCsvFromArray('fringe.csv', ["Name","Show","About","Agent / Email","Venues","Review / Clip","Sold / Added","Score","Notes"], fringeDATA.map(r=>({
    name:r.name, show:r.show, about:r.about, 'Agent / Email': r.agent + ' / ' + (r.email||''), venues:r.venues, 'Review / Clip': (r.review||'') + ' | ' + (r.clip||''), 'Sold / Added': (r.soldOutCount||'') + ' / ' + (r.addedShows||''), developPotential: r.developPotential, notes: r.notes || ''
  })));
});

/* Social wiring */
function parseFollowers(str){
  if(!str) return 0;
  const m = (str+'').replace(/,/g,'').match(/(\d+(\.\d+)?)([kKmM]?)/);
  if(!m) return 0;
  let num = parseFloat(m[1]); const unit = (m[3]||'').toLowerCase();
  if(unit==='k') num*=1000; if(unit==='m') num*=1_000_000; return num;
}
document.getElementById('social-search').addEventListener('input', ()=>{
  const q = document.getElementById('social-search').value.toLowerCase();
  const sortBy = document.getElementById('social-sortBy').value;
  const order = document.getElementById('social-order').value;
  let rows = socialDATA.filter(s => (s.name||'').toLowerCase().includes(q) || (s.platform||'').toLowerCase().includes(q));
  rows.sort((a,b)=> {
    const A = (sortBy === 'Followers' ? parseFollowers(a.followers) : (a.Score||0));
    const B = (sortBy === 'Followers' ? parseFollowers(b.followers) : (b.Score||0));
    return order === 'desc' ? (B - A) : (A - B);
  });
  renderSocialTable(rows);
});
document.getElementById('social-reset').addEventListener('click', ()=>{ document.getElementById('social-search').value=''; document.getElementById('social-sortBy').value='Score'; document.getElementById('social-order').value='desc'; document.getElementById('social-search').dispatchEvent(new Event('input')); });
document.getElementById('social-csv').addEventListener('click', ()=>{ downloadCsvFromArray('social.csv', ["Name","Platform","Followers","Style","Links","Score","Notes"], socialDATA); });

/* Plays wiring */
document.getElementById('plays-search').addEventListener('input', ()=>{
  const q = document.getElementById('plays-search').value.toLowerCase();
  let rows = playsDATA.filter(p => (p.title||'').toLowerCase().includes(q) || (p.playwright||'').toLowerCase().includes(q) || (p.theatre||'').toLowerCase().includes(q) || (p.director||'').toLowerCase().includes(q));
  renderPlaysTable(rows);
});
document.getElementById('plays-reset').addEventListener('click', ()=>{ document.getElementById('plays-search').value=''; document.getElementById('plays-search').dispatchEvent(new Event('input')); });
document.getElementById('plays-csv').addEventListener('click', ()=>{ downloadCsvFromArray('plays.csv', ["Title","Playwright","Director","Theatre","Genre","Reviews","Score","Notes"], playsDATA); });

/* Books wiring */
document.getElementById('books-search').addEventListener('input', ()=>{
  const q = document.getElementById('books-search').value.toLowerCase();
  let rows = booksDATA.filter(b => (b.title||'').toLowerCase().includes(q) || (b.author||'').toLowerCase().includes(q));
  renderBooksTable(rows);
});
document.getElementById('books-reset').addEventListener('click', ()=>{ document.getElementById('books-search').value=''; document.getElementById('books-search').dispatchEvent(new Event('input')); });
document.getElementById('books-csv').addEventListener('click', ()=>{ downloadCsvFromArray('books.csv', ["Title","Author","Genre","Trending","Links","Score"], booksDATA); });

/* initial render */
loadAllAndRender();

/* --------------------------
   Navigation (hash-based + JS)
   -------------------------- */
function navigate(id){
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('section-active'));
  const el = document.getElementById(id);
  if(el) el.classList.add('section-active');
  history.pushState(null, '', '#' + id);
  window.scrollTo({top:0, behavior:'smooth'});
}
document.querySelectorAll('a[href^="#"]').forEach(a=> a.addEventListener('click', (e)=>{ e.preventDefault(); const t=a.getAttribute('href').slice(1); navigate(t); }));
document.getElementById('goHome').addEventListener('click', ()=> navigate('home'));
window.addEventListener('load', ()=>{ const target = (location.hash || '#home').slice(1); if(document.getElementById(target)) navigate(target); });

/* --------------------------
   Admin (client-side modal)
   -------------------------- */
const ADMIN_PASSWORD = 'avalon-intern-2025'; // change locally if you want

document.getElementById('openAdminBtn').addEventListener('click', ()=>{
  const p = prompt('Enter admin password to edit data (local only):');
  if(p === ADMIN_PASSWORD) openAdmin();
  else if(p!==null) alert('Wrong password.');
});

function openAdmin(){
  document.getElementById('adminFringe').value = JSON.stringify(fringeDATA, null, 2);
  document.getElementById('adminSocial').value = JSON.stringify(socialDATA, null, 2);
  document.getElementById('adminPlays').value = JSON.stringify(playsDATA, null, 2);
  document.getElementById('adminBooks').value = JSON.stringify(booksDATA, null, 2);
  document.getElementById('adminModal').style.display = 'flex';
}

document.getElementById('adminClose').addEventListener('click', ()=>{ document.getElementById('adminModal').style.display='none'; });
document.getElementById('adminReset').addEventListener('click', ()=>{ if(confirm('Reset local data to built-in defaults?')) resetBuiltIn(); });

document.getElementById('saveFringe').addEventListener('click', ()=>{
  try { const val = JSON.parse(document.getElementById('adminFringe').value); fringeDATA = val; saveToLocal('fringe', fringeDATA); applyFringeFilters(); alert('Fringe saved locally.'); }
  catch(e){ alert('Invalid JSON: ' + e.message); }
});
document.getElementById('loadFringe').addEventListener('click', ()=>{ document.getElementById('adminFringe').value = JSON.stringify(loadFromLocal('fringe') || fringeDATA, null, 2); });

document.getElementById('saveSocial').addEventListener('click', ()=>{
  try { const val = JSON.parse(document.getElementById('adminSocial').value); socialDATA = val; saveToLocal('social', socialDATA); renderSocialTable(socialDATA); alert('Social saved locally.'); }
  catch(e){ alert('Invalid JSON: ' + e.message); }
});
document.getElementById('loadSocial').addEventListener('click', ()=>{ document.getElementById('adminSocial').value = JSON.stringify(loadFromLocal('social') || socialDATA, null, 2); });

document.getElementById('savePlays').addEventListener('click', ()=>{
  try { const val = JSON.parse(document.getElementById('adminPlays').value); playsDATA = val; saveToLocal('plays', playsDATA); renderPlaysTable(playsDATA); alert('Plays saved locally.'); }
  catch(e){ alert('Invalid JSON: ' + e.message); }
});
document.getElementById('loadPlays').addEventListener('click', ()=>{ document.getElementById('adminPlays').value = JSON.stringify(loadFromLocal('plays') || playsDATA, null, 2); });

document.getElementById('saveBooks').addEventListener('click', ()=>{
  try { const val = JSON.parse(document.getElementById('adminBooks').value); booksDATA = val; saveToLocal('books', booksDATA); renderBooksTable(booksDATA); alert('Books saved locally.'); }
  catch(e){ alert('Invalid JSON: ' + e.message); }
});
document.getElementById('loadBooks').addEventListener('click', ()=>{ document.getElementById('adminBooks').value = JSON.stringify(loadFromLocal('books') || booksDATA, null, 2); });

/* final ensure render */
loadAllAndRender();
</script>
</body>
</html>
